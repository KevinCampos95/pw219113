<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="utf-8">
		<title>WebWorkers</title>
	</head>
	<body>
		<p>Contar números: <div id="resultado"></div></p>
		<button onClick="iniciarWorker();">Iniciar</button>
		<button onClick="detenerWorker();">Detener</button>

		<p>Contar números: <div id="resultado2"></div></p>
		<button onClick="iniciarWorker2();">Iniciar</button>
		<button onClick="detenerWorker2();">Detener</button>

		<script type="text/javascript">
			var worker1 = undefined;
			var worker2 = undefined;

			function iniciarWorker(){
				// Preguntar si soporta el worker
				if(typeof(worker1) == "undefined"){
					worker1 = new Worker('demoWorker.js');
					worker1.onmessage = function(event){
						document.getElementById('resultado').innerHTML=event.data;
					}
				}else{
					alert("No soporta WebWorkers")
				}
			}
			function detenerWorker(){
				worker1.terminate();
				worker1 = undefined;
			}
			function iniciarWorker2(){
				// Preguntar si soporta el worker
				if(typeof(worker2) == "undefined"){
					worker2 = new Worker('demoWorker.js');
					worker2.onmessage = function(event){
						document.getElementById('resultado2').innerHTML=event.data;
					}
				}else{
					alert("No soporta WebWorkers")
				}
			}
			function detenerWorker2(){
				worker2.terminate();
				worker2 = undefined;
			}
		</script>
	</body>
</html>